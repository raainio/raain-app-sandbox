"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3421],{3421:(z,Z,g)=>{g.r(Z),g.d(Z,{RainsPageModule:()=>V});var m=g(6895),_=g(433),a=g(4556),h=g(1407),l=g(5861),e=g(8256),x=g(6568),f=g(7227);function C(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-card",7)(1,"ion-card-header")(2,"ion-card-title"),e._uU(3,"Rain Zones"),e.qZA(),e.TgZ(4,"ion-card-subtitle"),e._uU(5," Based on radars, Rain zones are supporting rain computing. "),e.qZA()(),e.TgZ(6,"ion-card-content")(7,"p"),e._uU(8,"Manage here rain computing status."),e.qZA()(),e.TgZ(9,"ion-button",8),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.closeInfo("welcome-card"))}),e._uU(10,"Got it"),e.qZA()()}}function R(r,s){1&r&&e._UZ(0,"ion-icon",15)}function D(r,s){1&r&&e._UZ(0,"ion-icon",16)}function P(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-item-sliding")(1,"ion-item"),e.YNc(2,R,1,0,"ion-icon",9),e.ALo(3,"hasGoodQuality"),e.YNc(4,D,1,0,"ion-icon",10),e.ALo(5,"hasGoodQuality"),e.TgZ(6,"ion-button",11),e.NdJ("click",function(){const i=e.CHM(o).$implicit,c=e.oxw();return e.KtG(c.clickOnRain(i))}),e._uU(7,"details"),e.qZA(),e.TgZ(8,"ion-progress-bar",12),e.NdJ("click",function(){const i=e.CHM(o).$implicit,c=e.oxw();return e.KtG(c.clickOnRain(i))}),e.ALo(9,"progressBuffer"),e.ALo(10,"progressValue"),e.qZA(),e.TgZ(11,"ion-icon",13),e.NdJ("click",function(){const i=e.CHM(o).$implicit,c=e.oxw();return e.KtG(c.clickOnRain(i))}),e.qZA(),e.TgZ(12,"ion-icon",14),e.NdJ("click",function(){const i=e.CHM(o).$implicit,c=e.oxw();return e.KtG(c.clickOnRain(i))}),e.qZA()()()}if(2&r){const o=s.$implicit;e.xp6(2),e.Q6J("ngIf",e.lcZ(3,4,o)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(5,6,o)),e.xp6(4),e.s9C("buffer",e.lcZ(9,8,o)),e.s9C("value",e.lcZ(10,10,o))}}let y=(()=>{const s=class{constructor(t,n){this.router=t,this.profile=n,this.rainsInfoAlreadyViewed={},this.rains=[]}ngOnInit(){this.refresh()}refresh(t){var n=this;return(0,l.Z)(function*(){try{n.sessionData=yield n.profile.refreshProfile(),n.sessionData.infos.rainsInfoAlreadyViewed&&(n.rainsInfoAlreadyViewed=n.sessionData.infos.rainsInfoAlreadyViewed),n.rains=yield n.profile.getRains(n.profile.asTeamId)}catch(i){console.error("refresh pb:",i)}t&&t.target.complete()})()}clickOnRain(t){return this.router.navigate(["/rains",t.id])}closeInfo(t){var n=this;return(0,l.Z)(function*(){n.rainsInfoAlreadyViewed[t]=!0,n.sessionData&&n.sessionData.infos&&(n.sessionData.infos.rainsInfoAlreadyViewed=n.rainsInfoAlreadyViewed,yield n.profile.storeAll())})()}};let r=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(h.F0),e.Y36(x.H))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-rains"]],viewQuery:function(n,i){if(1&n&&e.Gf(a.ki,5),2&n){let c;e.iGM(c=e.CRH())&&(i.modal=c.first)}},decls:16,vars:2,consts:[["slot","start"],["src","assets/icon/favicon.ico",2,"height","30px","padding-left","20px"],["slot","fixed",3,"ionRefresh"],["class","welcome-card",4,"ngIf"],[4,"ngFor","ngForOf"],["horizontal","end","slot","fixed","vertical","bottom"],["name","add"],[1,"welcome-card"],["fill","outline",3,"click"],["color","success","name","radio-button-off","slot","start",4,"ngIf"],["color","warning","name","radio-button-off","slot","start",4,"ngIf"],["expand","block",3,"click"],["color","primary",3,"buffer","value","click"],["color","primary","name","cloud-done","slot","end",3,"click"],["color","primary","name","arrow-right","slot","end",3,"click"],["color","success","name","radio-button-off","slot","start"],["color","warning","name","radio-button-off","slot","start"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-menu-button")(4,"ion-img",1),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6," Rain zones "),e.qZA()()(),e.TgZ(7,"ion-content")(8,"ion-refresher",2),e.NdJ("ionRefresh",function(u){return i.refresh(u)}),e._UZ(9,"ion-refresher-content"),e.qZA(),e.YNc(10,C,11,0,"ion-card",3),e.TgZ(11,"ion-list"),e.YNc(12,P,13,12,"ion-item-sliding",4),e.qZA(),e.TgZ(13,"ion-fab",5)(14,"ion-fab-button"),e._UZ(15,"ion-icon",6),e.qZA()()()),2&n&&(e.xp6(10),e.Q6J("ngIf",!i.rainsInfoAlreadyViewed.hasOwnProperty("welcome-card")),e.xp6(2),e.Q6J("ngForOf",i.rains))},dependencies:[m.sg,m.O5,a.YG,a.Sm,a.PM,a.FN,a.Zi,a.tO,a.Dq,a.W2,a.IJ,a.W4,a.Gu,a.gu,a.Xz,a.Ie,a.td,a.q_,a.fG,a.X7,a.nJ,a.Wo,a.wd,a.sr,f.UA,f.$j,f.XW],styles:[".vertical-align-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex!important;align-content:center!important;align-items:center!important}.content-card[_ngcontent-%COMP%]{margin-bottom:100px}ion-list[_ngcontent-%COMP%]{margin-bottom:50px}"]}),r})();var p=g(8525),v=g(3900),M=g(3471),A=g(4948),w=g(3432),I=g(3060),b=g(6324);function N(r,s){1&r&&e._UZ(0,"ion-icon",26)}function U(r,s){1&r&&e._UZ(0,"ion-icon",27)}function J(r,s){if(1&r&&(e.TgZ(0,"ion-item")(1,"ion-card",28)(2,"ion-card-content"),e._UZ(3,"raain-date-focus",29),e.qZA()()()),2&r){const o=e.oxw(2);e.xp6(3),e.Q6J("currentHeight",300)("points",o.countPoints)}}function k(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-button",30),e.NdJ("click",function(){e.CHM(o);const n=e.oxw().ngIf,i=e.oxw();return e.KtG(i.refreshMap(n))}),e._uU(1," refresh map "),e.qZA()}}function G(r,s){1&r&&e._UZ(0,"ion-progress-bar",31)}function q(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-item"),e._UZ(1,"ion-icon",32),e.TgZ(2,"ion-label",33),e._uU(3),e.qZA(),e.TgZ(4,"ion-toggle",6),e.NdJ("ionChange",function(n){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onToggleMap(n))})("ngModelChange",function(n){e.CHM(o);const i=e.oxw(2);return e.KtG(i.toggleMap=n)}),e.qZA()()}if(2&r){const o=e.oxw(2);e.xp6(3),e.lnq(" Radar Measures: ",o.countsPeriod.radarMeasures," Gauge Measures: ",o.countsPeriod.gaugeMeasures," Rain Computations: ",o.countsPeriod.computationsByTeam," "),e.xp6(1),e.Q6J("ngModel",o.toggleMap)("checked",o.toggleMap)}}const S=function(){return[]},Q=function(r,s,o,t,n,i){return{gauges:r,borders:s,gaugesInCompare:o,selectedGauges:t,pixels:n,pixelsSolution:i}};function O(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-item")(1,"ion-grid")(2,"ion-row")(3,"ion-col",34)(4,"ion-card",35)(5,"ion-card-content")(6,"raain-map",36),e.NdJ("changedDate",function(n){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onDateChangeInMap(n))})("selectedMarker",function(n){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onGaugeSelectInMap(n))}),e.qZA()()()()()()()}if(2&r){const o=e.oxw(2);e.xp6(6),e.Q6J("coordinates",o.coordinates)("currentHeight",300)("defaultDate",o.dateShown)("markers",e.HTZ(9,Q,o.gauges,o.borders,o.compareManager.gaugesInCompare,o.compareManager.selectedGauges,o.compareManager.selectedPixels,e.DdM(8,S)))("sumFn",o.reportManager.sumFn)("sumValues",o.reportManager.sumValues)("timeframeContainers",o.timeframeContainers)("timeframeDates",o.timeframeDates)}}function H(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-item",37)(1,"raain-compare-stack",38),e.NdJ("selectedPoint",function(n){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onGaugeSelectInCompare(n))}),e.qZA()()}if(2&r){const o=e.oxw(2);e.xp6(1),e.Q6J("compareManager",o.compareManager)("cumulative",o.toggleCumulative)}}function F(r,s){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&r){const o=e.oxw(3);e.xp6(1),e.hij(" ",e.xi3(2,1,o.compareManager.currentQualityDoneDate,"yyyy-MM-dd HH:mm"),"")}}function Y(r,s){if(1&r&&(e.TgZ(0,"span",40),e._uU(1),e.ALo(2,"date"),e.qZA()),2&r){const o=e.oxw(3);e.xp6(1),e.hij(" ",e.xi3(2,1,o.compareManager.currentQualityDoneDate,"yyyy-MM-dd HH:mm"),"")}}function B(r,s){if(1&r&&(e.TgZ(0,"ion-item")(1,"small"),e.YNc(2,F,3,4,"span",2),e.YNc(3,Y,3,4,"span",39),e._uU(4),e.qZA()()),2&r){const o=e.oxw(2);e.xp6(2),e.Q6J("ngIf",(null==o.refreshManager.rainComputationMapDoneDate?null:o.refreshManager.rainComputationMapDoneDate.getTime())<=(null==o.compareManager.currentQualityDoneDate?null:o.compareManager.currentQualityDoneDate.getTime())),e.xp6(1),e.Q6J("ngIf",(null==o.refreshManager.rainComputationMapDoneDate?null:o.refreshManager.rainComputationMapDoneDate.getTime())>(null==o.compareManager.currentQualityDoneDate?null:o.compareManager.currentQualityDoneDate.getTime())),e.xp6(1),e.lnq(" launchedBy: ",o.compareManager.currentQualityLaunchedBy," version: ",o.compareManager.compareVersion," timeSpentInMs: ",o.compareManager.currentQualityTimeSpentInMs," ")}}function E(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",20),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(2);return e.KtG(n.modalCancel())}),e._uU(4,"Cancel"),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Ask support"),e.qZA(),e.TgZ(7,"ion-buttons",41)(8,"ion-button",42),e.NdJ("click",function(){e.CHM(o);const n=e.oxw().ngIf,i=e.oxw();return e.KtG(i.modalAsk(n,i.modalMessage))}),e._uU(9,"Ask"),e.qZA()()()(),e.TgZ(10,"ion-content",43)(11,"ion-item")(12,"ion-label",44),e._uU(13,"Enter your message"),e.qZA(),e.TgZ(14,"ion-input",45),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw(2);return e.KtG(i.modalMessage=n)}),e.qZA()()()}if(2&r){const o=e.oxw(2);e.xp6(8),e.Q6J("strong",!0),e.xp6(6),e.Q6J("ngModel",o.modalMessage)}}function K(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"ion-content")(1,"ion-list",3)(2,"ion-item"),e.YNc(3,N,1,0,"ion-icon",4),e.ALo(4,"hasGoodQuality"),e.YNc(5,U,1,0,"ion-icon",5),e.ALo(6,"hasGoodQuality"),e.TgZ(7,"ion-card-title"),e._uU(8),e.qZA(),e.TgZ(9,"ion-card-subtitle"),e._uU(10),e.qZA(),e.TgZ(11,"ion-toggle",6),e.NdJ("ionChange",function(){const i=e.CHM(o).ngIf,c=e.oxw();return e.KtG(c.onEnableCountHistoryTab(i))})("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.toggleHistory=n)}),e.qZA()(),e.YNc(12,J,4,2,"ion-item",2),e.TgZ(13,"ion-item"),e._UZ(14,"ion-icon",7),e.TgZ(15,"ion-label",8),e._uU(16," Start "),e.TgZ(17,"input",9),e.NdJ("change",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.onPeriodBeginChange(n))}),e.qZA(),e._uU(18," \xa0During "),e.qZA(),e.TgZ(19,"ion-select",10),e.NdJ("ionDismiss",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.onPeriodDurationChange(n))})("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.periodDurationAsString=n)}),e.TgZ(20,"ion-select-option",11),e._uU(21,"30 minutes"),e.qZA(),e.TgZ(22,"ion-select-option",12),e._uU(23,"1 hour"),e.qZA(),e.TgZ(24,"ion-select-option",13),e._uU(25,"2 hours"),e.qZA(),e.TgZ(26,"ion-select-option",14),e._uU(27,"3 hours"),e.qZA(),e.TgZ(28,"ion-select-option",15),e._uU(29,"4 hours"),e.qZA(),e.TgZ(30,"ion-select-option",16),e._uU(31,"5 hours"),e.qZA(),e.TgZ(32,"ion-select-option",17),e._uU(33,"6 hours"),e.qZA()(),e.TgZ(34,"ion-label"),e._uU(35),e.qZA(),e.YNc(36,k,2,0,"ion-button",18),e.qZA(),e.YNc(37,G,1,0,"ion-progress-bar",19),e.YNc(38,q,5,5,"ion-item",2),e.YNc(39,O,7,16,"ion-item",2),e.TgZ(40,"ion-button",20),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.launchComputation())}),e._uU(41,"compute this date"),e.qZA(),e.TgZ(42,"ion-button",20),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.onReportClick())}),e._uU(43,"report"),e.qZA(),e.TgZ(44,"ion-button",20),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.onReportCumulativeClick())}),e._uU(45,"cumul report"),e.qZA(),e.YNc(46,H,2,2,"ion-item",21),e.YNc(47,B,5,5,"ion-item",2),e.TgZ(48,"ion-item")(49,"span"),e._uU(50),e.qZA()()(),e.TgZ(51,"ion-modal",22),e.YNc(52,E,15,2,"ng-template"),e.qZA(),e.TgZ(53,"ion-fab",23)(54,"ion-fab-button",24),e._UZ(55,"ion-icon",25),e.qZA()()()}if(2&r){const o=s.ngIf,t=e.oxw();e.xp6(3),e.Q6J("ngIf",e.lcZ(4,17,o)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(6,19,o)),e.xp6(3),e.Oqu(o.name),e.xp6(2),e.hij("by ",null==t.teamNode?null:t.teamNode.name,""),e.xp6(1),e.Q6J("ngModel",t.toggleHistory)("checked",t.toggleHistory),e.xp6(1),e.Q6J("ngIf",t.toggleHistory),e.xp6(5),e.Q6J("value",t.periodBeginAsString),e.xp6(2),e.Q6J("ngModel",t.periodDurationAsString),e.xp6(16),e.Oqu(t.onChangeDetectionTest(o)),e.xp6(1),e.Q6J("ngIf",!t.refreshInProgress),e.xp6(1),e.Q6J("ngIf",t.refreshInProgress),e.xp6(1),e.Q6J("ngIf",t.countsPeriod.radarMeasures),e.xp6(1),e.Q6J("ngIf",t.toggleMap),e.xp6(7),e.Q6J("ngIf",t.toggleMap),e.xp6(1),e.Q6J("ngIf",t.toggleMap),e.xp6(3),e.Oqu(t.appVersion)}}const L=[{path:"",children:[{path:"",component:y},{path:":id",component:(()=>{const s=class{constructor(t,n,i,c){this.activatedRoute=t,this.profileService=n,this.radarService=i,this.storage=c,this.appVersion=A.i}static PeriodDisplay(t){let n=new Date;if(t){n=new Date(t);const c=6e4*n.getTimezoneOffset();n=new Date(n.getTime()-c)}return n.toISOString().substring(0,"2017-06-01T08:30".length)}ngAfterViewInit(){this.init()}ngOnDestroy(){this.cleanAll()}onEnableCountHistoryTab(t){var n=this;return(0,l.Z)(function*(){if(n.toggleHistory){const i=yield n.profileService.getCounts(t.getId());n.countPoints=[{label:"Nb Radar Measures",style:"bar",values:i.radarMeasures.map(c=>({date:new Date(c.name),value:c.x}))},{label:"Nb Gauge Measures",style:"line",values:i.gaugeMeasures.map(c=>({date:new Date(c.name),value:c.x/100}))},{label:"Nb Computations",style:"bar",values:i.computationsByTeam.map(c=>({date:new Date(c.name),value:c.x}))}]}else n.countPoints=[]})()}onPeriodBeginChange(t){var n=this;return(0,l.Z)(function*(){const i=t?.target?.value?t.target.value:n.periodBeginAsString;n.periodBegin=new Date(i),n.periodBeginAsString=i,n.storage.set("rainDetail-periodBegin",n.periodBegin),yield n.onPeriodDurationChange(t)})()}onPeriodDurationChange(t){var n=this;return(0,l.Z)(function*(){const i=parseFloat(n.periodDurationAsString);n.periodEnd=new Date(n.periodBegin.getTime()+36e5*i),n.periodEndAsString=n.periodEnd.toISOString(),n.storage.set("rainDetail-periodEnd",n.periodEnd),n.refreshManager.setPeriod(n.periodBegin,n.periodEnd).then(c=>{})})()}onDateChangeInMap(t){var n=this;return(0,l.Z)(function*(){n.dateShown=t,n.currentTimeframeTarget=yield n.refreshManager.fetch(n.dateShown,n.toggleGaugeMeasures)})()}onGaugeSelectInMap(t){var n=this;return(0,l.Z)(function*(){const i=n.gauges.filter(c=>c.lat===t.lat&&c.lng===t.lng);1===i.length&&(yield n.refreshManager.selectGauge(i[0]?.id,0))})()}onGaugeSelectInCompare(t){var n=this;return(0,l.Z)(function*(){yield n.refreshManager.selectGauge(t.point.id,t.compareIndex)})()}onToggleMap(t){var n=this;return(0,l.Z)(function*(){n.toggleMap&&(yield n.refreshMap(n.rainNode))})()}onChangeDetectionTest(t){return""}refreshMap(t){var n=this;return(0,l.Z)(function*(){n.gauges=yield n.getAllGauges(t),n.borders=[],n.refreshManager.refresh(!1).then(i=>{})})()}modalAsk(t,n){var i=this;return(0,l.Z)(function*(){return yield i.profileService.createNotification(t.getId(),"Rain: "+t.getId()+" Period: "+i.periodBegin.toISOString()+" - "+i.periodEnd.toISOString()+" Message: "+n),i.modal.dismiss(null,"confirm")})()}modalCancel(){var t=this;return(0,l.Z)(function*(){return t.modal.dismiss(null,"cancel")})()}onReportClick(){var t=this;return(0,l.Z)(function*(){yield t.reportManager.setDate(t.dateShown)})()}onReportCumulativeClick(){var t=this;return(0,l.Z)(function*(){yield t.reportManager.setPeriod(t.periodBegin,t.periodEnd)})()}launchComputation(){var t=this;return(0,l.Z)(function*(){yield t.profileService.launchRainComputation(t.rainNode.getId(),t.dateShown)})()}init(){this.cleanAll(),this.rain$=this.activatedRoute.paramMap.pipe((0,v.w)(t=>this.profileService.getRain(t.get("id")))),this.rain$.subscribe(this.initRain.bind(this))}cleanAll(){this.gauges=[],this.borders=[],this.gaugesToFilter=[],this.rainNodeGauges=[],this.rainNode=null,this.radarNode=null,this.timeframeContainers=new M.TimeframeContainers([]),this.currentTimeframeTarget=null,this.timeframeDates=[],this.countPoints=[],this.countsPeriod={radarMeasures:null,gaugeMeasures:null,computationsByTeam:null},this.toggleHistory=!1,this.toggleMap=!1,this.toggleCompare=!1,this.toggleGaugeMeasures=!1,this.toggleRemoveCompareDuplicate=!0,this.periodBegin=new Date(this.storage.get("rainDetail-periodBegin")),this.periodEnd=new Date(this.storage.get("rainDetail-periodEnd")),this.periodBeginAsString=s.PeriodDisplay(this.periodBegin),this.periodEndAsString=s.PeriodDisplay(this.periodEnd),this.periodDurationAsString=""+(this.periodEnd.getTime()-this.periodBegin.getTime())/36e5,this.dateShown=this.periodBegin,this.refreshInProgress=!1,this.compareManager?.cleanAll(),this.refreshManager?.cleanAll()}initRain(t){var n=this;return(0,l.Z)(function*(){n.rainNode=t,n.compareManager=new p.jC(n.rainNode,n.profileService),n.refreshManager=new p.mO(n.rainNode,n.radarService,n.profileService,n.compareManager,n.onRefreshInProgress.bind(n),n.onRefreshDone.bind(n),n.onFetchDone.bind(n)),n.refreshManager.setRemoveDuplicate(!0),n.reportManager=new p.Ec(n.rainNode,n.radarService,n.profileService);const i=n.rainNode.getCenter();if(n.coordinates=new M.MapLatLng(i.lat,i.lng),n.teamNode=yield n.profileService.getTeam(t.getLinkId("team")),1===t.getLinksCount("radar")){const u=t.getLinkId("radar");n.radarNode=yield n.profileService.getRadar(u)}n.periodBegin&&n.periodEnd&&n.refreshManager.setPeriod(n.periodBegin,n.periodEnd).then(function(){var u=(0,l.Z)(function*(d){yield n.refreshManager.refresh(!1)});return function(d){return u.apply(this,arguments)}}())})()}getAllGauges(t){var n=this;return(0,l.Z)(function*(){const i=yield n.profileService.getGauges(t?.getId());n.gaugesToFilter=i.sort((d,T)=>d.approxDistanceFrom(t.getCenter())-T.approxDistanceFrom(t.getCenter())).filter((d,T)=>T<200),n.rainNodeGauges=t.getLinks("gauge").map(d=>d.getId());const c=n.gaugesToFilter.filter(d=>n.rainNodeGauges.indexOf(d.id)>-1),u=[];for(const d of c)u.push(new M.MapLatLng(d.latitude,d.longitude,void 0,d.id,d.name));return u})()}onRefreshInProgress(t,n){var i=this;return(0,l.Z)(function*(){console.log("onRefreshInProgress",t),i.refreshInProgress=!0,i.countsPeriod=t,i.timeframeDates=n})()}onRefreshDone(t){var n=this;return(0,l.Z)(function*(){console.log("onRefreshDone",n.dateShown,t.length),n.timeframeDates=t,n.refreshInProgress=!1})()}onFetchDone(t){var n=this;return(0,l.Z)(function*(){console.log("fetch done",t),n.timeframeContainers=t})()}};let r=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(h.gz),e.Y36(p.H3),e.Y36(p.zL),e.Y36(p.Ke))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-rain-detail"]],viewQuery:function(n,i){if(1&n&&e.Gf(a.ki,5),2&n){let c;e.iGM(c=e.CRH())&&(i.modal=c.first)}},decls:9,vars:3,consts:[["slot","start"],["src","assets/icon/favicon.ico",2,"height","30px","padding-left","20px"],[4,"ngIf"],["lines","none"],["color","success","name","radio-button-off","slot","start",4,"ngIf"],["color","warning","name","radio-button-off","slot","start",4,"ngIf"],["slot","end",3,"ngModel","checked","ionChange","ngModelChange"],["name","calendar","slot","start"],["slot","start",2,"max-width","fit-content"],["type","datetime-local",3,"value","change"],["interface","popover","slot","start",3,"ngModel","ionDismiss","ngModelChange"],["value","0.5"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["slot","end",3,"click",4,"ngIf"],["color","primary","type","indeterminate",4,"ngIf"],[3,"click"],["class","ion-align-items-start",4,"ngIf"],["trigger","open-modal"],["horizontal","end","slot","fixed","vertical","bottom"],["id","open-modal"],["name","help"],["color","success","name","radio-button-off","slot","start"],["color","warning","name","radio-button-off","slot","start"],["id","card-count"],[3,"currentHeight","points"],["slot","end",3,"click"],["color","primary","type","indeterminate"],["name","map","slot","start"],[2,"color","lightgray","font-size","small"],["size-lg","12"],["id","card-map"],[3,"coordinates","currentHeight","defaultDate","markers","sumFn","sumValues","timeframeContainers","timeframeDates","changedDate","selectedMarker"],[1,"ion-align-items-start"],[3,"compareManager","cumulative","selectedPoint"],["style","color: red; font-size: larger",4,"ngIf"],[2,"color","red","font-size","larger"],["slot","end"],[3,"strong","click"],[1,"ion-padding"],["position","stacked"],["placeholder","Your message","type","text",3,"ngModel","ngModelChange"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-menu-button")(4,"ion-img",1),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6," Radar To Rain - Details "),e.qZA()()(),e.YNc(7,K,56,21,"ion-content",2),e.ALo(8,"async")),2&n&&(e.xp6(7),e.Q6J("ngIf",e.lcZ(8,1,i.rain$)))},dependencies:[m.O5,_.JJ,_.On,a.YG,a.Sm,a.PM,a.FN,a.tO,a.Dq,a.wI,a.W2,a.IJ,a.W4,a.jY,a.Gu,a.gu,a.Xz,a.pK,a.Ie,a.Q$,a.q_,a.fG,a.X7,a.Nd,a.t9,a.n0,a.wd,a.ho,a.sr,a.ki,a.w,a.QI,a.j9,w.g,I.A,b.j,m.Ov,m.uU,f.UA],styles:[".vertical-align-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex!important;align-items:center!important}ion-spinner[_ngcontent-%COMP%]{width:17px;height:17px}ion-card-subtitle[_ngcontent-%COMP%]{padding-left:20px}#gauge-select-item[_ngcontent-%COMP%]{width:100%}#gauge-select-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{max-width:400px}#card-count[_ngcontent-%COMP%]{width:100%}#card-conf-quality[_ngcontent-%COMP%]{width:400px}#card-perf-container[_ngcontent-%COMP%]{visibility:hidden;display:none}.cpu-bars[_ngcontent-%COMP%]{width:60px;height:60px;margin-right:20px}.cpu-lines[_ngcontent-%COMP%]{width:100px}raain-compare-stack[_ngcontent-%COMP%]{width:100%}"]}),r})()},{path:"new-instance",component:(()=>{const s=class{constructor(t,n){this.modalController=t,this.navParams=n}dismiss(){this.modalController.dismiss()}add(t,n,i){this.modalController.dismiss()}};let r=s;return s.\u0275fac=function(n){return new(n||s)(e.Y36(a.IN),e.Y36(a.X1))},s.\u0275cmp=e.Xpm({type:s,selectors:[["modal-page"]],inputs:{value:"value"},decls:19,vars:4,consts:[["padding",""],["heroForm","ngForm"],["type","url","placeholder","https://RadarToRain.you/RadarToRain","required","","name","RadarToRainUrl",3,"ngModel","ngModelChange"],["type","string","placeholder","User","required","","name","RadarToRainUser",3,"ngModel","ngModelChange"],["type","password","placeholder","Password","required","","name","RadarToRainPwd",3,"ngModel","ngModelChange"],["expand","block",3,"disabled","click"],["expand","block",3,"click"]],template:function(n,i){if(1&n&&(e.TgZ(0,"ion-content",0)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e._uU(4,"Connect your RadarToRain instance"),e.qZA()(),e.TgZ(5,"ion-card-content")(6,"form",null,1)(8,"ion-item")(9,"ion-input",2),e.NdJ("ngModelChange",function(u){return i.RadarToRainUrl=u}),e.qZA()(),e.TgZ(10,"ion-item")(11,"ion-input",3),e.NdJ("ngModelChange",function(u){return i.RadarToRainUser=u}),e.qZA()(),e.TgZ(12,"ion-item")(13,"ion-input",4),e.NdJ("ngModelChange",function(u){return i.RadarToRainPwd=u}),e.qZA()(),e.TgZ(14,"div")(15,"ion-button",5),e.NdJ("click",function(){return i.add(i.RadarToRainUrl,i.RadarToRainUser,i.RadarToRainPwd)}),e._uU(16,"Login "),e.qZA(),e.TgZ(17,"ion-button",6),e.NdJ("click",function(){return i.dismiss()}),e._uU(18,"dismiss "),e.qZA()()()()()()),2&n){const c=e.MAs(7);e.xp6(9),e.Q6J("ngModel",i.RadarToRainUrl),e.xp6(2),e.Q6J("ngModel",i.RadarToRainUser),e.xp6(2),e.Q6J("ngModel",i.RadarToRainPwd),e.xp6(2),e.Q6J("disabled",!i.RadarToRainUrl||!c.form.valid)}},dependencies:[_._Y,_.JJ,_.JL,_.Q7,_.On,_.F,a.YG,a.PM,a.FN,a.Zi,a.Dq,a.W2,a.pK,a.Ie,a.j9],encapsulation:2}),r})()}]}];let V=(()=>{const s=class{};let r=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[m.ez,_.u5,a.Pc,p.m8,h.Bz.forChild(L)]}),r})()}}]);